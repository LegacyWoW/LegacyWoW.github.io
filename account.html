<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>LegacyWoW — Create Account</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root{
      --bg:#0b0b0b;
      --panel: rgba(255,255,255,.04);
      --border: rgba(255,255,255,.10);
      --text:#e8e8e8;
      --muted: rgba(232,232,232,.85);
      --ok: rgba(120,255,170,.9);
      --bad: rgba(255,120,120,.9);
    }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(1200px 600px at 50% 0%, #1a1a1a 0%, var(--bg) 60%);
      color: var(--text);
    }
    .wrap{ max-width:950px; margin:0 auto; padding:26px 18px; }
    a{ color:#fff; }
    .top{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:14px;
    }
    .brand{
      font-weight:800;
      letter-spacing:.4px;
      text-decoration:none;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      padding:10px 12px;
      border-radius:14px;
      display:inline-block;
    }
    .nav{ display:flex; gap:10px; flex-wrap:wrap; }
    .nav a{
      text-decoration:none;
      font-weight:700;
      font-size:13px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
    }
    .nav a:hover{ background: rgba(255,255,255,.10); }

    .panel{
      border:1px solid var(--border);
      border-radius:18px;
      background: rgba(0,0,0,.25);
      padding:18px;
    }
    h1{ margin:0 0 6px; font-size:30px; }
    p{ margin:0 0 14px; color:var(--muted); line-height:1.55; }

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    .field{
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    label{ font-size:13px; opacity:.95; font-weight:800; }
    input{
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      color:#fff;
      outline:none;
      font-size:14px;
    }
    input::placeholder{ color: rgba(255,255,255,.45); }
    input:focus{ border-color: rgba(255,255,255,.28); }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:12px;
      align-items:center;
    }
    button{
      padding:12px 16px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.08);
      color:#fff;
      font-weight:900;
      cursor:pointer;
    }
    button:hover{ background: rgba(255,255,255,.12); }

    .msg{
      display:none;
      margin-top:12px;
      padding:12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      font-weight:800;
    }
    .msg.ok{ color: var(--ok); }
    .msg.bad{ color: var(--bad); }

    .codebox{
      display:none;
      margin-top:12px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.35);
      border-radius:16px;
      padding:12px;
      overflow:auto;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size:13px;
      color: rgba(255,255,255,.92);
      white-space: pre;
    }
    .note{
      margin-top:14px;
      border-top:1px solid rgba(255,255,255,.10);
      padding-top:14px;
      color: rgba(232,232,232,.75);
      font-size:13px;
      line-height:1.55;
    }
    .mini{
      margin-top:12px;
      color: rgba(232,232,232,.78);
      font-size:13px;
      line-height:1.55;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      border-radius:16px;
      padding:12px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <a class="brand" href="index.html">LegacyWoW</a>
      <div class="nav">
        <a href="how-to-play.html">How to Play</a>
        <a href="news.html">News</a>
        <a href="rules.html">Rules</a>
        <a href="faq.html">FAQ</a>
      </div>
    </div>

    <div class="panel">
      <h1>Create Account</h1>
      <p>
        For now, account creation is <b>manual</b> (safe and simple). Fill this out and the site will generate the exact
        <b>AzerothCore console command</b> you can copy/paste into your server to create the account.
      </p>

      <form id="accountForm" autocomplete="off">
        <div class="grid">
          <div class="field">
            <label for="username">Account Name</label>
            <input id="username" name="username" placeholder="e.g. LegacyPlayer" minlength="3" maxlength="16" required />
          </div>

          <div class="field">
            <label for="email">Email (optional)</label>
            <input id="email" name="email" placeholder="you@example.com" maxlength="64" />
          </div>

          <div class="field">
            <label for="password">Password</label>
            <input id="password" name="password" type="password" placeholder="••••••••" minlength="6" maxlength="64" required />
          </div>

          <div class="field">
            <label for="confirm">Confirm Password</label>
            <input id="confirm" name="confirm" type="password" placeholder="••••••••" minlength="6" maxlength="64" required />
          </div>
        </div>

        <div class="actions">
          <button type="submit">Generate Create Command</button>
          <button type="button" id="copyBtn">Copy Command</button>
          <a href="index.html">Back to Home</a>
        </div>

        <div id="msgOk" class="msg ok"></div>
        <div id="msgBad" class="msg bad"></div>
        <div id="cmdBox" class="codebox"></div>
      </form>

      <div class="mini">
        <b>Admin Instructions (AzerothCore):</b><br/>
        1) Open your <b>worldserver console</b> (or GM in-game).<br/>
        2) Paste the generated command, press Enter.<br/>
        3) The player can now log in with that username/password.
      </div>

      <div class="note">
        <b>Why not SQL?</b> AzerothCore stores secure password hashes. Using the built-in <code>account create</code> command avoids mistakes and keeps everything compatible.
      </div>
    </div>
  </div>

  <script>
    const form = document.getElementById("accountForm");
    const msgOk = document.getElementById("msgOk");
    const msgBad = document.getElementById("msgBad");
    const cmdBox = document.getElementById("cmdBox");
    const copyBtn = document.getElementById("copyBtn");

    function show(el, text){
      el.textContent = text;
      el.style.display = "block";
    }
    function hide(el){ el.style.display = "none"; }

    function sanitizeUsername(u){
      // AzerothCore usernames are typically uppercase internally, but command accepts normal.
      // Keep it strict for safety:
      return u.replace(/\s+/g,"").trim();
    }

    form.addEventListener("submit", (e) => {
      e.preventDefault();
      hide(msgOk); hide(msgBad);
      cmdBox.style.display = "none";
      cmdBox.textContent = "";

      const usernameRaw = document.getElementById("username").value;
      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value;
      const confirm = document.getElementById("confirm").value;

      const username = sanitizeUsername(usernameRaw);

      if(!/^[A-Za-z0-9_]+$/.test(username)){
        return show(msgBad, "Account Name can only contain letters, numbers, and underscore.");
      }
      if(username.length < 3 || username.length > 16){
        return show(msgBad, "Account Name must be 3–16 characters.");
      }
      if(password !== confirm){
        return show(msgBad, "Passwords do not match.");
      }
      if(password.length < 6){
        return show(msgBad, "Password must be at least 6 characters.");
      }

      // Generate safe AzerothCore command
      const cmd = `account create ${username} ${password}`;

      cmdBox.textContent =
`COPY/PASTE THIS INTO YOUR AZEROTHCORE WORLDSERVER CONSOLE:

${cmd}

Optional: if you want to set an email later, do it in your future account website or admin tools.
Email entered here: ${email ? email : "(none)"}`
      ;

      cmdBox.style.display = "block";
      show(msgOk, "Command generated! Copy it and paste into your worldserver console to create the account.");
    });

    copyBtn.addEventListener("click", async () => {
      hide(msgOk); hide(msgBad);
      if(!cmdBox.textContent){
        return show(msgBad, "Generate the command first.");
      }
      const textToCopy = cmdBox.textContent;

      try{
        await navigator.clipboard.writeText(textToCopy);
        show(msgOk, "Copied! Now paste it into your AzerothCore worldserver console.");
      }catch(e){
        show(msgBad, "Copy failed (browser blocked it). Select the text in the box and copy manually (Ctrl+C).");
      }
    });
  </script>
</body>
</html>
